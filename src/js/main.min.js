var config={api_endpoint:"http://localhost:8000/"},Models={},model={get:function(n,e,t){m.request({method:"GET",url:config.api_endpoint+n}).then(t)},post:function(n,e,t){m.request({method:"POST",url:config.api_endpoint+n,data:e}).then(t)}};Models.Program=function(){function n(){model.get("domain",{},function(n){r=n})}function e(e,t,o){model.post("program",{name:e,mission:t},function(e){n(),o(e.id)})}function t(e,t,o,r){model.post("program/"+e,{name:t,mission:o},function(e){n(),r(e.id)})}function o(){return r}var r=[];return{newItem:e,updateItem:t,loadContent:n,getContent:o}}(),Models.Task=function(){function n(){model.get("program/"+a,{},function(n){u=n.Tasks,m=n.name})}function e(){return u}function t(){return m}function o(e){e!==a&&(a=e,e>0&&n())}function r(e,t,o){model.post("task",{program:a,name:e,means:t},function(e){n(),o(e.id)})}function i(e,t,o,r){model.post("task/"+e,{name:t,means:o},function(e){n(),r(e.id)})}var a=-1,u=[],m="";return{newItem:r,updateItem:i,loadContent:n,getContent:e,getName:t,updateContent:o}}(),Models.Effort=function(){function n(){model.get("task/"+a,{},function(n){u=n.Efforts,m=n.name})}function e(){return u}function t(){return m}function o(e){e!==a&&(a=e,e>0&&n())}function r(e,t,o,r){model.post("effort",{task:a,name:e,type:t,people:o},function(e){n(),r(e.id)})}function i(e,t,o,r,i){model.post("effort/"+e,{name:t,type:o,people:r},function(e){n(),i(e.id)})}var a=-1,u=[],m="";return{newItem:r,updateItem:i,loadContent:n,getContent:e,getName:t,updateContent:o}}(),Models.Person=function(){function n(){model.get("people",{},function(n){i=n})}function e(){return i}function t(){model.get("teams",{},function(n){a=n})}function o(){return a}function r(e,t){model.post("person",{name:e},function(e){n(),t(e)})}var i=[],a=[];return{loadPeople:n,getPeople:e,loadTeams:t,getTeams:o,newItem:r}}(),Models.Changes=function(){function n(){model.get("changes",{},function(n){o=n.map(function(n){return n.new=!1,n.updatedAt==n.createdAt&&(n.new=!0),n.date=t(new Date(n.updatedAt)),n.task=n.Tasks[0].name,n.program=n.Tasks[0].Programs[0].name,n})})}function e(){return o}function t(n){var e=Math.floor((new Date-n)/1e3),t=Math.floor(e/31536e3);return t>1?t+" jaar":(t=Math.floor(e/2592e3))>1?t+" maanden":(t=Math.floor(e/604800))>1?t+" weken":(t=Math.floor(e/86400))>1?t+" dagen":(t=Math.floor(e/3600))>1?t+" uur":(t=Math.floor(e/60),t>1?t+" minuten":Math.floor(e)+" seconden")}var o=[];return{loadContent:n,getContent:e}}(),Models.Search=function(){function n(){model.get("search",{},function(n){t=n.map(function(n){return n.task=n.Tasks[0].name,n.program=n.Tasks[0].Programs[0].name,n})})}function e(){return t}var t=[];return{loadContent:n,getContent:e}}();var viewModels={};viewModels.Hierarchy=function(){function n(n){c=n,s=-1,f=-1,Models.Task.updateContent(c)}function e(){return c}function t(){var n=Models.Program.getContent();return n.length>0&&c>0?n[c].name:""}function o(n){s=n,f=-1,Models.Effort.updateContent(s)}function r(){return s}function i(n){f=n}function a(){return f}function u(n){console.log(n),l=n}function m(e,t,r){n(e),o(t),i(r)}var c=-1,s=-1,f=-1,l=-1;return{updatePerson:u,updateProgram:n,updateTask:o,updateEffort:i,getProgram:e,getTask:r,getEffort:a,getProgramName:t,jumpTo:m}}();var API_VERSION="0.1.0";model.get("",{},function(n){n.version!==API_VERSION?(console.log("out of sync!"),location.reload(!0)):m.route(document.body,"/",{"/":Page})});var ChangesList=function(){return Models.Changes.loadContent(),{view:function(n){return m(".ChangesList",[Models.Changes.getContent().map(function(e){return m(".change",{onclick:function(){n.attrs.onfind(),viewModels.Hierarchy.jumpTo(e.Tasks[0].Programs[0].id,e.Tasks[0].id,e.id)}},[m(".new",e.new?"nieuw":"aangepast"),m(".date",e.date+" geleden"),m(".program",e.program),m(".change",e.name)])})])}}},EditorEffort=function(){var n=!1,e="",t=-1,o=-1,r=[];return{oninit:function(i){i.attrs.open(function(i){n=!0,i?(e=i.name,t=i.id,r=[].concat(i.People),o=i.type):(e="",t=-1,r=[],o=-1)})},view:function(i){return!0===n?[m(".fullscreen",[m(".grey",{onclick:function(){n=!1}}),m(".editor.wide",[m(".name",i.attrs.title),m("form.form",{onsubmit:function(a){a.preventDefault(),i.attrs.onsave(t,e,o,r),t=-1,e="",o=-1,r=[],n=!1}},[m(".name","Naam"),m("input.input[placeholder=Inspanning][autofocus=true][wrap=hard]",{oninput:m.withAttr("value",function(n){e=n}),value:e,oncreate:function(n){setTimeout(function(){n.dom.focus()},10)}}),m(".column",[m(".name","Type"),m(TypeSelector,{type:o,onset:function(n){o=n}})]),m(".column",[m(".name","Mensen"),m(PersonList,{people:r,onremovePerson:function(n){for(var e=r.length-1;e>=0;e--)r[e].id===n.id&&r.splice(e,1)},effort:t})]),m(".column",[m(PersonSelector,{onadd:function(n){for(var e=r.length-1;e>=0;e--)if(r[e].id===n.id)return;r.push(n)}})]),m(".spacer",{style:"clear: both"}),m("button.button[type=submit]","Opslaan")])])])]:m("")}}},TypeSelector=function(){var n=["Project","Programma","Routine","Proces","Improvisatie","Klusje"];return{view:function(e){return[m(".TypeSelector",[n.map(function(n,t){return t===e.attrs.type?m(".type.selected",{onclick:function(){e.attrs.onset(-1)}},n):m(".type",{onclick:function(){e.attrs.onset(t)}},n)})])]}}},PersonList=function(){return{view:function(n){return m(".PersonList",[n.attrs.people.map(function(e){return m(".person",[m("span",e.name),m("span.remove",{onclick:function(){n.attrs.onremovePerson(e)}},"X")])})])}}},EditorProgram=function(){var n,e=!1,t="",o="",r=-1;return{oninit:function(n){n.attrs.open(function(n){e=!0,console.log(n),n?(t=n.name,o=n.mission,r=n.id):(t="",o="",r=-1)})},view:function(i){return!0===e?[m(".fullscreen",[m(".grey",{onclick:function(){e=!1}}),m(".editor",[m(".name.top",i.attrs.title),m("form.form",{onsubmit:function(n){n.preventDefault(),i.attrs.onsave(r,t,o),r=-1,t="",o="",e=!1}},[m(".name","Titel"),m("input.input[placeholder=Titel][autofocus=true][wrap=hard]",{oninput:m.withAttr("value",function(n){t=n}),value:t,oncreate:function(n){setTimeout(function(){n.dom.focus()},10)}}),m(".name","Missie"),m("textarea.textarea[placeholder=Missie][wrap=hard]",{oninput:m.withAttr("value",function(n){o=n}),value:o,onbeforeupdate:function(e,t){n=t.dom.selectionStart},onupdate:function(e){e.dom.selectionStart=n,e.dom.selectionEnd=n}}),m("button.button[type=submit]","Opslaan")])])])]:m("")}}},EditorTask=function(){var n=!1,e="",t="",o=-1;return{oninit:function(r){r.attrs.open(function(r){n=!0,r?(e=r.name,t=r.means,o=r.id):(e="",t="",o=-1)})},view:function(r){return!0===n?[m(".fullscreen",[m(".grey",{onclick:function(){n=!1}}),m(".editor",[m(".name.top",r.attrs.title),m("form.form",{onsubmit:function(i){i.preventDefault(),r.attrs.onsave(o,e,t),o=-1,e="",n=!1}},[m(".name","Beschrijving"),m(TextArea,{value:e,onchange:function(n){e=n},placeholder:"Opgave",autofocus:!0}),m(".name","door"),m(TextArea,{value:t,placeholder:"Methode",onchange:function(n){t=n}}),m("button.button[type=submit]","Opslaan")])])])]:m("")}}},Effort=function(){function n(n){var e=["Project","Programma","Routine","Proces","Improvisatie","Klusje"],t="geen";return n>-1&&(t=e[n]),t}var e;return{view:function(t){if(viewModels.Hierarchy.getTask()>0)return m(".half",[m(EditorEffort,{title:"Inspanning",open:function(n){e=n},onsave:function(n,e,t,o){-1===n?Models.Effort.newItem(e,t,o,function(n){viewModels.Hierarchy.updateEffort(n)}):Models.Effort.updateItem(n,e,t,o,function(n){viewModels.Hierarchy.updateEffort(n)})}}),m(List,{title:"Inspanningen",addbutton:!0,content:Models.Effort.getContent().map(function(t,o){return m(ListItem,{content:m(".effort",[m(".name",t.name),m(".info",[m(".label","type"),m("",n(t.type)),m(".label","mensen"),t.People.map(function(n){return m("",n.name)})])]),number:o+1,onclick:function(){viewModels.Hierarchy.updateEffort(t.id)},onedit:function(){e(t)},selected:function(){return viewModels.Hierarchy.getEffort()===t.id}})}),onadd:function(){e()}})])}}},EffortDetails=function(){function n(){model.get("details/"+i,{},function(n){a=n[0]})}function e(e){model.post("details/"+i+"/type",{type:e},function(){n()})}function t(e){console.log(e),model.post("details/"+i+"/person",{person:e},function(){n()})}function o(e){console.log(e),model.post("details/"+i+"/removeperson",{person:e},function(){n()})}function r(e){e!==i&&(i=e,e>0&&n())}var i=-1,a={type:-1,People:[]};return{view:function(n){return r(n.attrs.view),i>0?m(".half",[m(".name","Details"),m(".list",[m(TypeSelector,{effort:i,type:a.type,onset:e}),m(PersonSelector,{people:a.People,onadd:t,onremovePerson:o,effort:i})])]):n.attrs.display?m(".half",[m(".name","Details"),m(".list",[])]):void 0}}},TypeSelector=function(){var n=["Project","Programma","Routine","Proces","Improvisatie","Klusje"],e=!1;return{view:function(t){return e?[m(".what","Type"),m(".info",[m("select.select",{onchange:function(n){t.attrs.onset(parseInt(n.target.value-1)),e=!1}},[m("option",{disabled:!0,selected:!0},"kies type..."),n.map(function(n,e){return m("option",{value:e+1},n)})])])]:[m(".what","Type"),m(".info",{onclick:function(){e=!0}},[function(e){return-1===e?m("span","nog geen type"):m("span",n[e])}(t.attrs.type)])]}}},PersonSelector=function(){function n(){model.get("people",{},function(n){i=n})}function e(){o=!0,n()}var t=-1,o=!1,r="",i=[];return n(),{view:function(n){return t!==n.attrs.effort&&(t=n.attrs.effort,o=!1,r=""),o?[m(".what","Mensen"),m(".info.mode",[n.attrs.people.map(function(e){return m(".person",[m("span.n",e.name),m("span.edit",{onclick:function(){console.log("click remove"),n.attrs.onremovePerson(e.name)}},"verwijder")])}),m("datalist#people",i.map(function(n){return m("option",{value:n.name})})),m("input.input",{list:"people",placeholder:"Voornaam Achternaam",oninput:m.withAttr("value",function(n){r=n}),onchange:m.withAttr("value",function(n){r=n}),value:r}),m("button",{onclick:function(){""!==r&&n.attrs.onadd(r),r=""}},"+")])]:0===n.attrs.people.length?[m(".what","Mensen"),m(".info",{onclick:e},m(".person","voeg mensen toe..."))]:[m(".what","Mensen"),m(".info",{onclick:e},[n.attrs.people.map(function(n){return m(".person",n.name)})])]}}},FilteredPeopleList=function(){function n(n){return Models.Person.getPeople().filter(function(e){return e.name.toLowerCase().indexOf(n.toLowerCase())>-1})}return Models.Person.loadPeople(),{view:function(e){var t=n(e.attrs.value);return t.length>0?m(".PersonList",t.map(function(n){return m(".person",{onclick:function(){e.attrs.onadd(n)}},n.name)})):m(".PersonList",[m(".personAdd",{onclick:function(){e.attrs.onnew(p)}},"voeg '"+e.attrs.value+"' toe aan personen")])}}},List=function(){return{view:function(n){return m("",[m(".header",n.attrs.title),n.attrs.addbutton?m(".addbutton",{onclick:n.attrs.onadd},"+"):m(""),0===n.attrs.content.length?m(".list","deze lijst is leeg!"):m(".list",n.attrs.content)])}}},ListItem=function(){return{view:function(n){return m(".listItem"+(n.attrs.selected()?".selected":""),{onclick:function(){n.attrs.onclick()}},[m(".left",[m(".number",n.attrs.number),m(".edit",{onclick:function(e){e.preventDefault(),n.attrs.onedit()}},"edit")]),m(".right",[m(".content",n.attrs.content)])])}}},Menu=function(){return{view:function(n){return m("nav",[m(".layer",[m(".type","domein"),m(".title","Sociaal domein")]),m("img.arrow",{src:"arrow.png"}),m(".layer.top",[m(".type","team"),m(".title",n.attrs.name)])])}}},PersonSelector=function(){var n="";return{view:function(e){return m(".PersonSelector",[m("input.input",{placeholder:"Voornaam Achternaam",oninput:m.withAttr("value",function(e){n=e}),onchange:m.withAttr("value",function(e){n=e}),value:n}),function(){return n.length>0?m(FilteredPeopleList,{value:n,onadd:function(t){e.attrs.onadd(t),n=""},onnew:function(t){Models.Person.newItem(n,function(t){Models.Person.loadTeams(),Models.Person.loadPeople(),e.attrs.onadd({id:t.id,name:t.name}),n=""})}}):m(TeamList,{onadd:function(n){e.attrs.onadd(n)}})}()])}}},Program=function(){Models.Program.loadContent();var n;return{view:function(e){var t=1;return m(".half",[m(EditorProgram,{title:"Programma",open:function(e){n=e},onsave:function(n,e,t){-1===n?Models.Program.newItem(e,t,function(n){viewModels.Hierarchy.updateProgram(n)}):Models.Program.updateItem(n,e,t,function(n){viewModels.Hierarchy.updateProgram(n)})}}),m(List,{title:"Programma's",content:Models.Program.getContent().map(function(e){return m(".domain",[m(".title",e.name),e.Programs.map(function(e){return m(ListItem,{content:m(".program",[m(".name",e.name),m(".mission",e.mission)]),number:t++,onclick:function(){console.log(e.id),viewModels.Hierarchy.updateProgram(e.id)},onedit:function(){n(e)},selected:function(){return viewModels.Hierarchy.getProgram()===e.id}})})])}),onadd:function(){n()}})])}}},SearchBar=function(){var n=!1,e="";return{view:function(t){return[function(){if(n)return m(".fullscreen",m(".grey",{onclick:function(){n=!1}}))}(),m(".search"+(n?".active":""),[m("div",m("input",{placeholder:"Zoeken naar ...",value:e,oninput:m.withAttr("value",function(n){e=n}),onchange:m.withAttr("value",function(n){e=n}),onclick:function(){n=!0}})),function(){if(n)return m(".popup",[m(".column",[m(".header","Inspanningen"),m(SearchList,{value:e,onfind:function(){n=!1}})]),m(".column",[m(".header","Personeel"),function(){return e.length>0?m(FilteredPeopleList,{value:e}):m(TeamList)}()]),m(".column",[m(".header","Recente Veranderingen"),m(ChangesList,{onfind:function(){n=!1}})])])}()])]}}},SearchList=function(){function n(n){return Models.Search.getContent().filter(function(e){return e.name.toLowerCase().indexOf(n.toLowerCase())>-1})}return Models.Search.loadContent(),{view:function(e){return m(".SearchList",[n(e.attrs.value).map(function(n){return m(".result",{onclick:function(){e.attrs.onfind(),viewModels.Hierarchy.jumpTo(n.Tasks[0].Programs[0].id,n.Tasks[0].id,n.id)}},[m(".program",n.program),m(".task",n.task),m(".effort",n.name)])})])}}},Task=function(){var n;return{view:function(e){if(viewModels.Hierarchy.getProgram()>0)return m(".half",[m(EditorTask,{title:"Opgave",open:function(e){n=e},onsave:function(n,e,t){-1===n?Models.Task.newItem(e,t,function(n){viewModels.Hierarchy.updateTask(n)}):Models.Task.updateItem(n,e,t,function(n){viewModels.Hierarchy.updateTask(n)})}}),m(List,{title:"Opgaven ",addbutton:!0,content:Models.Task.getContent().map(function(e,t){return m(ListItem,{content:m(".task",[m("span.name",e.name),e.means?m("span.means",[m("span.door"," door "),m("span",e.means)]):[]]),number:t+1,onclick:function(){viewModels.Hierarchy.updateTask(e.id)},onedit:function(){n(e)},selected:function(){return viewModels.Hierarchy.getTask()===e.id}})}),onadd:function(){n()}})])}}},TeamList=function(){return Models.Person.loadTeams(),{view:function(n){return m(".PersonList",Models.Person.getTeams().map(function(e){return m(".team",{oncreate:function(n){e.id===viewModels.Hierarchy.getProgram()&&n.dom.scrollIntoView(!0)}},[m(".name",e.name),e.People.map(function(e){return m(".person",{onclick:function(){n.attrs.onadd(e)}},e.name)})])}))}}},Viewer=function(){return{view:function(n){return m(".viewer#viewer",[m(Program),m(Task),m(Effort)])}}},ChangesList=function(){return Models.Changes.loadContent(),{view:function(n){return m(".ChangesList",[Models.Changes.getContent().map(function(e){return m(".change",{onclick:function(){n.attrs.onfind(),viewModels.Hierarchy.jumpTo(e.Tasks[0].Programs[0].id,e.Tasks[0].id,e.id)}},[m(".new",e.new?"nieuw":"aangepast"),m(".date",e.date+" geleden"),m(".program",e.program),m(".change",e.name)])})])}}},NavBar=function(){return{view:function(n){return m("nav",[m(".nav-dashbutton",[m(".nav-dashbutton-icon")])])}}},EditorEffort=function(){var n=!1,e="",t=-1,o=-1,r=[];return{oninit:function(i){i.attrs.open(function(i){n=!0,i?(e=i.name,t=i.id,r=[].concat(i.People),o=i.type):(e="",t=-1,r=[],o=-1)})},view:function(i){return!0===n?[m(".fullscreen",[m(".grey",{onclick:function(){n=!1}}),m(".editor.wide",[m(".name",i.attrs.title),m("form.form",{onsubmit:function(a){a.preventDefault(),i.attrs.onsave(t,e,o,r),t=-1,e="",o=-1,r=[],n=!1}},[m(".name","Naam"),m("input.input[placeholder=Inspanning][autofocus=true][wrap=hard]",{oninput:m.withAttr("value",function(n){e=n}),value:e,oncreate:function(n){setTimeout(function(){n.dom.focus()},10)}}),m(".column",[m(".name","Type"),m(TypeSelector,{type:o,onset:function(n){o=n}})]),m(".column",[m(".name","Mensen"),m(PersonList,{people:r,onremovePerson:function(n){for(var e=r.length-1;e>=0;e--)r[e].id===n.id&&r.splice(e,1)},effort:t})]),m(".column",[m(PersonSelector,{onadd:function(n){for(var e=r.length-1;e>=0;e--)if(r[e].id===n.id)return;r.push(n)}})]),m(".spacer",{style:"clear: both"}),m("button.button[type=submit]","Opslaan")])])])]:m("")}}},TypeSelector=function(){var n=["Project","Programma","Routine","Proces","Improvisatie","Klusje"];return{view:function(e){return[m(".TypeSelector",[n.map(function(n,t){return t===e.attrs.type?m(".type.selected",{onclick:function(){e.attrs.onset(-1)}},n):m(".type",{onclick:function(){e.attrs.onset(t)}},n)})])]}}},PersonList=function(){return{view:function(n){return m(".PersonList",[n.attrs.people.map(function(e){return m(".person",[m("span",e.name),m("span.remove",{onclick:function(){n.attrs.onremovePerson(e)}},"X")])})])}}},EditorProgram=function(){var n,e=!1,t="",o="",r=-1;return{oninit:function(n){n.attrs.open(function(n){e=!0,console.log(n),n?(t=n.name,o=n.mission,r=n.id):(t="",o="",r=-1)})},view:function(i){return!0===e?[m(".fullscreen",[m(".grey",{onclick:function(){e=!1}}),m(".editor",[m(".name.top",i.attrs.title),m("form.form",{onsubmit:function(n){n.preventDefault(),i.attrs.onsave(r,t,o),r=-1,t="",o="",e=!1}},[m(".name","Titel"),m("input.input[placeholder=Titel][autofocus=true][wrap=hard]",{oninput:m.withAttr("value",function(n){t=n}),value:t,oncreate:function(n){setTimeout(function(){n.dom.focus()},10)}}),m(".name","Missie"),m("textarea.textarea[placeholder=Missie][wrap=hard]",{oninput:m.withAttr("value",function(n){o=n}),value:o,onbeforeupdate:function(e,t){n=t.dom.selectionStart},onupdate:function(e){e.dom.selectionStart=n,e.dom.selectionEnd=n}}),m("button.button[type=submit]","Opslaan")])])])]:m("")}}},EditorTask=function(){var n=!1,e="",t="",o=-1;return{oninit:function(r){r.attrs.open(function(r){n=!0,r?(e=r.name,t=r.means,o=r.id):(e="",t="",o=-1)})},view:function(r){return!0===n?[m(".fullscreen",[m(".grey",{onclick:function(){n=!1}}),m(".editor",[m(".name.top",r.attrs.title),m("form.form",{onsubmit:function(i){i.preventDefault(),r.attrs.onsave(o,e,t),o=-1,e="",n=!1}},[m(".name","Beschrijving"),m(TextArea,{value:e,onchange:function(n){e=n},placeholder:"Opgave",autofocus:!0}),m(".name","door"),m(TextArea,{value:t,placeholder:"Methode",onchange:function(n){t=n}}),m("button.button[type=submit]","Opslaan")])])])]:m("")}}},Effort=function(){function n(n){var e=["Project","Programma","Routine","Proces","Improvisatie","Klusje"],t="geen";return n>-1&&(t=e[n]),t}var e;return{view:function(t){if(viewModels.Hierarchy.getTask()>0)return m(".half",[m(EditorEffort,{title:"Inspanning",open:function(n){e=n},onsave:function(n,e,t,o){-1===n?Models.Effort.newItem(e,t,o,function(n){viewModels.Hierarchy.updateEffort(n)}):Models.Effort.updateItem(n,e,t,o,function(n){viewModels.Hierarchy.updateEffort(n)})}}),m(List,{title:"Inspanningen",addbutton:!0,content:Models.Effort.getContent().map(function(t,o){return m(ListItem,{content:m(".effort",[m(".name",t.name),m(".info",[m(".label","type"),m("",n(t.type)),m(".label","mensen"),t.People.map(function(n){return m("",n.name)})])]),number:o+1,onclick:function(){viewModels.Hierarchy.updateEffort(t.id)},onedit:function(){e(t)},selected:function(){return viewModels.Hierarchy.getEffort()===t.id}})}),onadd:function(){e()}})])}}},EffortDetails=function(){function n(){model.get("details/"+i,{},function(n){a=n[0]})}function e(e){model.post("details/"+i+"/type",{type:e},function(){n()})}function t(e){console.log(e),model.post("details/"+i+"/person",{person:e},function(){n()})}function o(e){console.log(e),model.post("details/"+i+"/removeperson",{person:e},function(){n()})}function r(e){e!==i&&(i=e,e>0&&n())}var i=-1,a={type:-1,People:[]};return{view:function(n){return r(n.attrs.view),i>0?m(".half",[m(".name","Details"),m(".list",[m(TypeSelector,{effort:i,type:a.type,onset:e}),m(PersonSelector,{people:a.People,onadd:t,onremovePerson:o,effort:i})])]):n.attrs.display?m(".half",[m(".name","Details"),m(".list",[])]):void 0}}},TypeSelector=function(){var n=["Project","Programma","Routine","Proces","Improvisatie","Klusje"],e=!1;return{view:function(t){return e?[m(".what","Type"),m(".info",[m("select.select",{onchange:function(n){t.attrs.onset(parseInt(n.target.value-1)),e=!1}},[m("option",{disabled:!0,selected:!0},"kies type..."),n.map(function(n,e){return m("option",{value:e+1},n)})])])]:[m(".what","Type"),m(".info",{onclick:function(){e=!0}},[function(e){return-1===e?m("span","nog geen type"):m("span",n[e])}(t.attrs.type)])]}}},PersonSelector=function(){function n(){model.get("people",{},function(n){i=n})}function e(){o=!0,n()}var t=-1,o=!1,r="",i=[];return n(),{view:function(n){return t!==n.attrs.effort&&(t=n.attrs.effort,o=!1,r=""),o?[m(".what","Mensen"),m(".info.mode",[n.attrs.people.map(function(e){return m(".person",[m("span.n",e.name),m("span.edit",{onclick:function(){console.log("click remove"),n.attrs.onremovePerson(e.name)}},"verwijder")])}),m("datalist#people",i.map(function(n){return m("option",{value:n.name})})),m("input.input",{list:"people",placeholder:"Voornaam Achternaam",oninput:m.withAttr("value",function(n){r=n}),onchange:m.withAttr("value",function(n){r=n}),value:r}),m("button",{onclick:function(){""!==r&&n.attrs.onadd(r),r=""}},"+")])]:0===n.attrs.people.length?[m(".what","Mensen"),m(".info",{onclick:e},m(".person","voeg mensen toe..."))]:[m(".what","Mensen"),m(".info",{onclick:e},[n.attrs.people.map(function(n){return m(".person",n.name)})])]}}},FilteredPeopleList=function(){function n(n){return Models.Person.getPeople().filter(function(e){return e.name.toLowerCase().indexOf(n.toLowerCase())>-1})}return Models.Person.loadPeople(),{view:function(e){var t=n(e.attrs.value);return t.length>0?m(".PersonList",t.map(function(n){return m(".person",{onclick:function(){e.attrs.onadd(n)}},n.name)})):m(".PersonList",[m(".personAdd",{onclick:function(){e.attrs.onnew(p)}},"voeg '"+e.attrs.value+"' toe aan personen")])}}},Page=function(){return{view:function(n){return[m(NavBar)]}}},List=function(){return{view:function(n){return m("",[m(".header",n.attrs.title),n.attrs.addbutton?m(".addbutton",{onclick:n.attrs.onadd},"+"):m(""),0===n.attrs.content.length?m(".list","deze lijst is leeg!"):m(".list",n.attrs.content)])}}},ListItem=function(){return{view:function(n){return m(".listItem"+(n.attrs.selected()?".selected":""),{onclick:function(){n.attrs.onclick()}},[m(".left",[m(".number",n.attrs.number),m(".edit",{onclick:function(e){e.preventDefault(),n.attrs.onedit()}},"edit")]),m(".right",[m(".content",n.attrs.content)])])}}},Menu=function(){return{view:function(n){return m("nav",[m(".layer",[m(".type","domein"),m(".title","Sociaal domein")]),m("img.arrow",{src:"arrow.png"}),m(".layer.top",[m(".type","team"),m(".title",n.attrs.name)])])}}},PersonSelector=function(){var n="";return{view:function(e){return m(".PersonSelector",[m("input.input",{placeholder:"Voornaam Achternaam",oninput:m.withAttr("value",function(e){n=e}),onchange:m.withAttr("value",function(e){n=e}),value:n}),function(){return n.length>0?m(FilteredPeopleList,{value:n,onadd:function(t){e.attrs.onadd(t),n=""},onnew:function(t){Models.Person.newItem(n,function(t){Models.Person.loadTeams(),Models.Person.loadPeople(),e.attrs.onadd({id:t.id,name:t.name}),n=""})}}):m(TeamList,{onadd:function(n){e.attrs.onadd(n)}})}()])}}},Program=function(){Models.Program.loadContent();var n;return{view:function(e){var t=1;return m(".half",[m(EditorProgram,{title:"Programma",open:function(e){n=e},onsave:function(n,e,t){-1===n?Models.Program.newItem(e,t,function(n){viewModels.Hierarchy.updateProgram(n)}):Models.Program.updateItem(n,e,t,function(n){viewModels.Hierarchy.updateProgram(n)})}}),m(List,{title:"Programma's",content:Models.Program.getContent().map(function(e){return m(".domain",[m(".title",e.name),e.Programs.map(function(e){return m(ListItem,{content:m(".program",[m(".name",e.name),m(".mission",e.mission)]),number:t++,onclick:function(){console.log(e.id),viewModels.Hierarchy.updateProgram(e.id)},onedit:function(){n(e)},selected:function(){return viewModels.Hierarchy.getProgram()===e.id}})})])}),onadd:function(){n()}})])}}},TextArea=function(){var n=0;return{view:function(e){return m("textarea.textarea[placeholder="+e.attrs.placeholder+"][wrap=hard]",{oninput:m.withAttr("value",function(n){e.attrs.onchange(n)}),onchange:m.withAttr("value",function(n){e.attrs.onchange(n)}),value:e.attrs.value,oncreate:function(n){n.attrs.autofocus&&setTimeout(function(){n.dom.focus()},10)},onbeforeupdate:function(e,t){n=t.dom.selectionStart},onupdate:function(e){e.dom.selectionStart=n,e.dom.selectionEnd=n}})}}},SearchBar=function(){var n=!1,e="";return{view:function(t){return[function(){if(n)return m(".fullscreen",m(".grey",{onclick:function(){n=!1}}))}(),m(".search"+(n?".active":""),[m("div",m("input",{placeholder:"Zoeken naar ...",value:e,oninput:m.withAttr("value",function(n){e=n}),onchange:m.withAttr("value",function(n){e=n}),onclick:function(){n=!0}})),function(){if(n)return m(".popup",[m(".column",[m(".header","Inspanningen"),m(SearchList,{value:e,onfind:function(){n=!1}})]),m(".column",[m(".header","Personeel"),function(){return e.length>0?m(FilteredPeopleList,{value:e}):m(TeamList)}()]),m(".column",[m(".header","Recente Veranderingen"),m(ChangesList,{onfind:function(){n=!1}})])])}()])]}}},SearchList=function(){function n(n){return Models.Search.getContent().filter(function(e){return e.name.toLowerCase().indexOf(n.toLowerCase())>-1})}return Models.Search.loadContent(),{view:function(e){return m(".SearchList",[n(e.attrs.value).map(function(n){return m(".result",{onclick:function(){e.attrs.onfind(),viewModels.Hierarchy.jumpTo(n.Tasks[0].Programs[0].id,n.Tasks[0].id,n.id)}},[m(".program",n.program),m(".task",n.task),m(".effort",n.name)])})])}}},Task=function(){var n;return{view:function(e){if(viewModels.Hierarchy.getProgram()>0)return m(".half",[m(EditorTask,{title:"Opgave",open:function(e){n=e},onsave:function(n,e,t){-1===n?Models.Task.newItem(e,t,function(n){viewModels.Hierarchy.updateTask(n)}):Models.Task.updateItem(n,e,t,function(n){viewModels.Hierarchy.updateTask(n)})}}),m(List,{title:"Opgaven ",addbutton:!0,content:Models.Task.getContent().map(function(e,t){return m(ListItem,{content:m(".task",[m("span.name",e.name),e.means?m("span.means",[m("span.door"," door "),m("span",e.means)]):[]]),number:t+1,onclick:function(){viewModels.Hierarchy.updateTask(e.id)},onedit:function(){n(e)},selected:function(){return viewModels.Hierarchy.getTask()===e.id}})}),onadd:function(){n()}})])}}},TeamList=function(){return Models.Person.loadTeams(),{view:function(n){return m(".PersonList",Models.Person.getTeams().map(function(e){return m(".team",{oncreate:function(n){e.id===viewModels.Hierarchy.getProgram()&&n.dom.scrollIntoView(!0)}},[m(".name",e.name),e.People.map(function(e){return m(".person",{onclick:function(){n.attrs.onadd(e)}},e.name)})])}))}}},Viewer=function(){return{view:function(n){return m(".viewer#viewer",[m(Program),m(Task),m(Effort)])}}};